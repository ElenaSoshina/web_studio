# Настройка EmailJS для отправки заявок на почту

## Шаг 1: Регистрация на EmailJS

1. Перейдите на [https://www.emailjs.com/](https://www.emailjs.com/)
2. Нажмите "Sign Up" и создайте аккаунт
3. Подтвердите email

## Шаг 2: Настройка почтового сервиса

1. В Dashboard перейдите в **Email Services**
2. Нажмите **Add New Service**
3. Выберите ваш почтовый провайдер (Gmail, Outlook, Yahoo и др.)
4. Следуйте инструкциям для подключения вашей почты
5. **Скопируйте Service ID** (например: `service_gmail_xyz123`)

### Для Gmail:
- Включите двухфакторную аутентификацию
- Создайте пароль приложения в настройках Google Account
- Используйте этот пароль вместо основного

## Шаг 3: Создание шаблона письма

1. Перейдите в **Email Templates**
2. Нажмите **Create New Template**
3. Вставьте следующий шаблон:

### Тема письма:
```
Новая заявка с сайта от {{from_name}}
```

### Содержимое письма:
```html
<h2>Новая заявка с сайта WebAp.dev</h2>

<p><strong>Дата:</strong> {{date}}</p>
<p><strong>Имя:</strong> {{from_name}}</p>
<p><strong>Телефон:</strong> {{from_phone}}</p>
<p><strong>Telegram:</strong> {{from_telegram}}</p>

<h3>Сообщение:</h3>
<p>{{message}}</p>

<hr>
<p><em>Это письмо отправлено автоматически с контактной формы сайта.</em></p>
```

4. **Скопируйте Template ID** (например: `template_contact_form`)

## Шаг 4: Получение Public Key

1. Перейдите в **Account** (в верхнем меню)
2. Найдите раздел **API Keys**
3. **Скопируйте Public Key** (например: `abcd1234EFGH5678`)

## Шаг 5: Настройка переменных окружения

1. Создайте файл `.env` в корне проекта:
```bash
cp emailjs.env.example .env
```

2. Откройте `.env` и замените значения:
```env
VITE_EMAILJS_SERVICE_ID=ваш_service_id
VITE_EMAILJS_TEMPLATE_ID=ваш_template_id  
VITE_EMAILJS_PUBLIC_KEY=ваш_public_key
```

3. Убедитесь, что `.env` добавлен в `.gitignore`

## Шаг 6: Тестирование

1. Перезапустите сервер разработки:
```bash
npm run dev
```

2. Заполните и отправьте форму на сайте
3. Проверьте вашу почту - должно прийти письмо с данными формы

## Ограничения бесплатного плана

- 200 писем в месяц
- Водяной знак "Sent with EmailJS"
- Базовая защита от спама

## Альтернативные решения

Если EmailJS не подходит, рассмотрите:

### 1. Formspree
- Простая интеграция
- Хорошая защита от спама
- Бесплатно до 50 отправок в месяц

### 2. Netlify Forms (если деплоите на Netlify)
- Автоматическая интеграция
- 100 отправок в месяц бесплатно

### 3. Собственный backend
- Полный контроль
- Без ограничений
- Требует настройки сервера

## Устранение проблем

### Ошибка "Public key is required"
- Проверьте, что переменная `VITE_EMAILJS_PUBLIC_KEY` установлена
- Перезапустите сервер после изменения `.env`

### Ошибка "Template not found"
- Убедитесь, что Template ID правильный
- Проверьте, что шаблон активен в EmailJS

### Письма не приходят
- Проверьте папку спам
- Убедитесь, что почтовый сервис подключен правильно
- Проверьте логи в консоли браузера

### Ошибка валидации
- Проверьте формат телефона (минимум 10 цифр)
- Telegram должен начинаться с @
- Все обязательные поля должны быть заполнены

## Дополнительные настройки

### Автоответ пользователю
Можно настроить отправку подтверждения пользователю:
1. Создайте второй шаблон для автоответа
2. Добавьте второй вызов emailjs.send() в коде

### Защита от спама
1. Включите reCAPTCHA в настройках EmailJS
2. Добавьте rate limiting на клиенте
3. Валидируйте данные на сервере (если есть backend) 